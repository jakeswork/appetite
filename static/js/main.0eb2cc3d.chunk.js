(this.webpackJsonpappetite=this.webpackJsonpappetite||[]).push([[0],{113:function(e,t,n){},166:function(e,t){},169:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n(20),i=n(10),l=n(73),s=n(3),u=n(14);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(19),d=n(77),p=n(6),f=n.n(p),b=function(e){var t=e.classes,n=void 0===t?{}:t,a=e.secondary,o=void 0!==a&&a,c=e.flat,i=void 0!==c&&c,l=e.children,s=void 0===l?null:l,u=e.icon,p=void 0===u?null:u,b=e.success,g=void 0!==b&&b,h=(e.danger,e.disabled),v=void 0!==h&&h,E=e.loading,y=void 0!==E&&E,x=e.className,O=void 0===x?"":x,j=Object(m.a)(e,["classes","secondary","flat","children","icon","success","danger","disabled","loading","className"]),S=n.button;return o&&(S=n.secondary),i&&(S=n.flat),r.a.createElement("button",Object.assign({disabled:v||y||g},j,{className:f()(S,O)}),s,p&&!y&&r.a.createElement("div",{className:n.buttonIcon},r.a.cloneElement(p,{size:20})),y&&r.a.createElement("div",{className:n.buttonIcon},r.a.createElement(d.ClassicSpinner,{size:16})))},g=n(8),h=n(12),v=function(e){return{display:"inline-block",userSelect:"none",textDecoration:"none",textAlign:"center",position:"relative",border:0,WebkitBoxShadow:"0 1px 5px 0 rgba(0,0,0,0.06)",boxShadow:"0 1px 5px 0 rgba(0,0,0,0.06)",fontSize:16,outline:"none",fontWeight:"bold",minWidth:88,margin:"8px 0",WebkitAppearance:"none",MozAppearance:"none",appearance:"none",borderRadius:8,fontFamily:e.fontFamily,padding:"16px 32px"}},E=Object(s.b)((function(e){var t;return t={},Object(g.a)(t,e.media.mobile,{button:{width:"100%"},secondary:{width:"100%"},link:{width:"calc(100% - 66px)"}}),Object(g.a)(t,"button",Object(h.a)({},v(e),{background:function(t){var n=t.danger,a=t.success,r=t.disabled,o=t.loading;return r||o?e.colorGrey:n?e.colorRed:a?e.colorGreen:e.colorPrimary},cursor:function(e){var t=e.disabled,n=void 0!==t&&t,a=e.success;return n||void 0!==a&&a?"default":"pointer"},border:0,color:"#fff",textShadow:"0 1px 0 rgba(0,0,0,0.03)"})),Object(g.a)(t,"secondary",Object(h.a)({},v(e),{background:function(t){var n=t.danger,a=t.success,r=t.disabled,o=t.loading;return r||o?e.colorGrey:n?e.colorRed:a?e.colorGreen:"transparent"},color:function(t){var n=t.danger,a=t.success,r=t.disabled,o=t.loading;return r||o||n||a?"white":e.colorPrimary},borderColor:function(t){var n=t.danger,a=t.success,r=t.disabled,o=t.loading;return r||o?e.colorGrey:n?e.colorRed:a?e.colorGreen:e.colorPrimary},cursor:function(e){var t=e.disabled,n=void 0!==t&&t,a=e.success;return n||void 0!==a&&a?"default":"pointer"},backgroundColor:"transparent",border:"1px solid"})),Object(g.a)(t,"flat",Object(h.a)({},v(e),{cursor:function(e){var t=e.disabled,n=void 0!==t&&t,a=e.success;return n||void 0!==a&&a?"default":"pointer"},color:e.colorPrimary,border:0,WebkitBoxShadow:0,boxShadow:0,background:"transparent"})),Object(g.a)(t,"buttonIcon",{fontSize:8,width:24,height:24,position:"absolute",right:16,bottom:"50%",marginBottom:-12,userSelect:"none",pointerEvents:"none",display:"flex",justifyContent:"center",alignItems:"center"}),t}))(b),y=function(e){var t=e.classes,n=void 0===t?{}:t,a=e.children,o=void 0===a?null:a,c=e.className,i=void 0===c?"":c,l=Object(m.a)(e,["classes","children","className"]);return r.a.createElement("div",Object.assign({className:f()(n.root,i)},l),o)},x=Object(s.b)((function(e){return{root:{border:"1px solid ".concat(e.colorGrey),background:"#fff",borderRadius:8,display:"inline-block",position:"relative",padding:32,paddingBottom:24,margin:8,zIndex:0}}}))(y),O=n(5),j=Object(a.forwardRef)((function(e,t){var n,o,c=e.classes,i=void 0===c?{}:c,l=e.placeholder,s=e.className,u=e.icon,d=e.inputIsFocused,p=void 0===d?function(){}:d,b=e.onEnterPressed,h=void 0===b?function(){}:b,v=e.value,E=void 0===v?"":v,y=(e.width,e.ignoreTab),x=void 0!==y&&y,j=e.onFocus,S=void 0===j?function(){}:j,w=e.onBlur,k=void 0===w?function(){}:w,C=e.error,N=void 0===C?"":C,I=Object(m.a)(e,["classes","placeholder","className","icon","inputIsFocused","onEnterPressed","value","width","ignoreTab","onFocus","onBlur","error"]),T=Object(a.useState)(!1),P=Object(O.a)(T,2),F=P[0],B=P[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:f()(i.root,s)},l&&r.a.createElement("span",{"data-test-id":"placeholder",className:f()(i.placeholder,(n={},Object(g.a)(n,i.placeholderActive,F),Object(g.a)(n,i.error,Boolean(N)),n))},l),u&&r.a.cloneElement(u,{className:i.inputIcon}),r.a.createElement("input",Object.assign({},I,{ref:t,onFocus:function(e){return B(!0),p&&p(!0),S&&S(e)},onBlur:function(e){return B(E.length>0),p&&p(!1),k&&k(e)},className:f()(i.input,(o={},Object(g.a)(o,i.inputActive,F),Object(g.a)(o,i.error,Boolean(N)),o)),value:E,onKeyDown:function(e){if(13===e.keyCode&&h(),9===e.keyCode&&x)return e.preventDefault()}}))),N&&r.a.createElement(R,{bold:!0,red:!0},N))})),S=Object(s.b)((function(e){return{input:{padding:"12px 16px",paddingRight:32,outline:"none",border:"1px solid ".concat(e.colorGrey),borderRadius:8,fontSize:16,width:"calc(100% - 50px)",fontFamily:e.fontFamily},root:function(e){var t=e.width;return{position:"relative",margin:"8px 0",display:"inline-block",width:void 0===t?"":t}},placeholder:{position:"absolute",fontFamily:e.fontFamily,top:12,left:12,userSelect:"none",pointerEvents:"none",color:"#ccc",padding:"0 8px",fontSize:16,transition:"all .2s ease-in-out",background:"white"},placeholderActive:{top:-6,left:8,fontWeight:"bold",fontSize:12,color:e.colorPrimary},inputActive:{border:"1px solid ".concat(e.colorPrimary)},inputIcon:{fontSize:8,width:20,height:20,position:"absolute",right:16,bottom:"50%",marginBottom:-8,userSelect:"none"},error:{borderColor:e.colorRed,color:e.colorRed}}}))(j),w=function(e){var t=e.bold,n=void 0!==t&&t,a=e.classes,o=e.children,c=e.h1,i=e.h2,l=e.h3,s=e.h4,u=e.caption,m=e.style,d=e.className,p=m;return n&&(p=Object(h.a)({fontWeight:"bold"},m)),c?r.a.createElement("h1",{style:p,className:f()(a.h1,d)},o):i?r.a.createElement("h2",{style:p,className:f()(a.h2,d)},o):l?r.a.createElement("h3",{style:p,className:f()(a.h3,d)},o):s?r.a.createElement("h4",{style:p,className:f()(a.h4,d)},o):u?r.a.createElement("span",{style:p,className:f()(a.caption,d)},o):r.a.createElement("p",{style:p,className:f()(a.p,d)},o)},k=function(e,t){return{fontFamily:e.fontFamily,fontWeight:700,margin:0,marginBottom:4,color:C(t,e)}},C=function(e,t){var n=t.textPrimary;return e.primaryColor&&(n=t.colorPrimary),e.secondaryColor&&(n=t.colorSecondary),e.red&&(n=t.colorRed),e.green&&(n=t.colorGreen),e.grey&&(n=t.colorGrey),n},N=function(e){return Object(g.a)({h1:function(t){return Object(h.a)({},k(e,t),{fontSize:64,marginBottom:8})},h2:function(t){return Object(h.a)({},k(e,t),{fontSize:48})},h3:function(t){return Object(h.a)({},k(e,t),{fontSize:32})},h4:function(t){return Object(h.a)({},k(e,t),{fontSize:24,marginBottom:16})},caption:function(t){return Object(h.a)({},k(e,t),{wordWrap:"break-word",fontSize:12,fontWeight:800,letterSpacing:"0.08333333333333333em",textTransform:"uppercase",userSelect:"none"})},p:function(t){return Object(h.a)({},k(e,t),{fontSize:16,fontWeight:400,marginBottom:8})}},e.media.mobile,{h1:{fontSize:48},h2:{fontSize:40},h3:{fontSize:32},h4:{fontSize:24}})},R=Object(s.b)(N)(w),I=n(48),T=n.n(I),P=n(195);T.a.setAppElement("#root");var F=function(e){var t=e.classes,n=void 0===t?{}:t,a=e.className,o=e.children,c=e.closeButton,i=void 0===c||c,l=e.title,s=Object(m.a)(e,["classes","className","children","closeButton","title"]);return r.a.createElement(T.a,Object.assign({className:f()(n.modal,a),closeTimeoutMS:200,contentLabel:l||"modal",style:{overlay:{display:"flex",justifyContent:"center",alignItems:"center"}}},s),i&&r.a.createElement(P.a,{className:n.closeModal,onClick:s.onRequestClose}),l&&r.a.createElement(R,{primaryColor:!0,className:n.title,h3:!0},l),o)},B=(n(113),Object(s.b)((function(e){return{modal:{height:460,width:560,padding:32,margin:"0 auto",background:"white",position:"relative",border:"1px solid ".concat(e.colorGrey),borderRadius:8,"&:focus":{outlineColor:e.colorPrimary}},closeModal:{position:"absolute",top:8,right:8,cursor:"pointer"},title:{marginBottom:24}}}))(F)),W=n(26),U=(n(114),function(e){var t=e.classes,n=void 0===t?{}:t;return r.a.createElement(W.a,{className:n.container,bodyClassName:n.body,toastClassName:n.toast,progressClassName:n.progress,position:"bottom-left",transition:W.b})}),z=Object(s.b)((function(e){return{body:{borderRadius:8,padding:16,color:e.textPrimary,fontFamily:e.fontFamily,fontWeight:"bold"},progress:{background:e.colorPrimary},toast:{borderRadius:4},container:{userSelect:"none"}}}))(U),A=n(192),M={entering:{opacity:1,transform:"scale(1)"},entered:{opacity:1,transform:"scale(1)"},exiting:{opacity:0,transform:"scale(0.9)"},exited:{opacity:0,transform:"scale(0.9)"},unmounted:{}},_=function(e){var t=e.classes,n=void 0===t?{}:t,a=e.children,o=Object(m.a)(e,["classes","children"]);return r.a.createElement(A.a,o,(function(e){return r.a.createElement("div",{className:n.root,style:Object(h.a)({},M[e])},a)}))},D=Object(s.b)({root:function(e){var t=e.timeout;return{transition:"all ".concat(void 0===t?300:t,"ms ease-in-out"),opacity:0,transform:"scale(0.9)",transformOrigin:"right"}}})(_),H=n(80),G=n.n(H),V=function(e){var t=e.classes,n=void 0===t?{}:t;return r.a.createElement("header",{className:n.root},r.a.createElement("img",{src:G.a,alt:"Appetite Logo"}))},L=Object(s.b)({root:{position:"fixed",top:24,left:64,right:0,"& > img":{width:164}}})(V),K=n(4),Y=n.n(K),J=n(7),q=n(198),Q=n(199),X=n(200),$=n(201),Z=n(202),ee=n(203),te=n(81),ne=n.n(te),ae=n(82),re=n.n(ae),oe=n(35),ce=n(36),ie=n(83),le=n.n(ie),se=Object({NODE_ENV:"production",PUBLIC_URL:"/appetite",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_ENDPOINT||"http://localhost:5000",ue=new(function(){function e(){Object(oe.a)(this,e),this.socket=le()(se,{transports:["websocket"],forceNew:!0})}return Object(ce.a)(e,[{key:"whenRoomUpdates",value:function(e){return this.socket.on("roomUsersUpdated",e)}},{key:"whenVoteIsFinished",value:function(e){return this.socket.on("voteComplete",e)}},{key:"whenMessageHistoryUpdates",value:function(e){return this.socket.on("messageHistoryUpdated",e)}},{key:"sendMessage",value:function(e){return this.socket.emit("sendMessage",e)}},{key:"getMessageHistory",value:function(){var e=this;return new Promise((function(t,n){e.socket.emit("getMessageHistory"),e.socket.on("messageHistory",(function(e){return t(e)})),e.socket.on("getMessageHistoryError",(function(e){return n(new Error(e))}))}))}},{key:"createRoom",value:function(e,t,n){var a=this;return new Promise((function(r,o){a.socket.emit("createRoom",e,t,n),a.socket.on("successfulCreate",(function(e){return r(e)})),a.socket.on("createRoomError",(function(e){return o(new Error(e))}))}))}},{key:"joinRoom",value:function(e){var t=this;return new Promise((function(n,a){t.socket.emit("joinRoom",e),t.socket.on("successfulJoin",(function(e){return n(e)})),t.socket.on("joinRoomError",(function(e){return a(new Error(e))}))}))}},{key:"setUsername",value:function(e){var t=this;return new Promise((function(n,a){t.socket.emit("setUsername",e),t.socket.on("successfulSetUsername",(function(e){return n(e)})),t.socket.on("setUsernameError",(function(e){return a(new Error(e))}))}))}},{key:"updateSelection",value:function(e){var t=this;return new Promise((function(n,a){t.socket.emit("updateSelection",e),t.socket.on("successfulUpdateSelection",(function(e){return n(e)})),t.socket.on("updateSelectionError",(function(e){return a(new Error(e))}))}))}},{key:"confirmSelection",value:function(){var e=this;return new Promise((function(t,n){e.socket.emit("confirmSelection"),e.socket.on("successfulConfirmSelection",(function(e){return t(e)}))}))}}]),e}()),me=n(84),de=n.n(me),pe=(n(169),n(85)),fe=n.n(pe),be=n(196),ge=Object({NODE_ENV:"production",PUBLIC_URL:"/appetite",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_ENDPOINT||"http://localhost:5000",he=function(){function e(){Object(oe.a)(this,e)}return Object(ce.a)(e,null,[{key:"get",value:function(){var e=Object(J.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URL("".concat(ge).concat(t)),Object.keys(n).forEach((function(e){return a.searchParams.append(e,n[e])})),e.prev=2,e.next=5,fetch(a.toString());case 5:return r=e.sent,e.abrupt("return",r||null);case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"searchCities",value:function(){var t=Object(J.a)(Y.a.mark((function t(n){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/api/v1/cities",{searchQuery:n});case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",a.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCuisinesByCityId",value:function(){var t=Object(J.a)(Y.a.mark((function t(n){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/api/v1/cuisines",{cityId:n});case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",a.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getRestaurants",value:function(){var t=Object(J.a)(Y.a.mark((function t(n,a,r,o){var c,i;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={cityId:n},a&&(c.cuisines=a.toString()),r&&(c.searchQuery=r),o&&(c.paginationStart=o.toString()),t.next=6,e.get("/api/v1/restaurants/search",c);case 6:if(i=t.sent){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",i.json());case 10:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()}]),e}(),ve=function(e){var t=e.onCitySelected,n=void 0===t?function(){}:t,o=e.inputRef,c=e.classes,i=void 0===c?{}:c,l=Object(a.useState)(""),s=Object(O.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)([]),p=Object(O.a)(d,2),b=p[0],h=p[1],v=function(){var e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.searchCities(u);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",h([]));case 5:return e.abrupt("return",h(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(fe.a,{suggestions:b,inputProps:{onChange:function(e,t){var n=t.newValue;return m(n)},value:u},multiSection:!1,shouldRenderSuggestions:function(e){return e.length>3},getSuggestionValue:function(e){return e&&e.name},onSuggestionSelected:function(e,t){var a=t.suggestion;return n(a)},highlightFirstSuggestion:!0,onSuggestionsFetchRequested:v,focusInputOnSuggestionClick:!1,onSuggestionsClearRequested:function(){return h([])},renderSuggestion:function(e,t){var n=t.isHighlighted;return e&&r.a.createElement(R,{bold:!0,className:f()(i.suggestion,Object(g.a)({},i.suggestionHighlighted,n))},e.name)},renderInputComponent:function(e){return r.a.createElement(S,Object.assign({},e,{ref:o,width:"100%",ignoreTab:!0,placeholder:"Search for a city",icon:r.a.createElement(be.a,null)}))}})},Ee=Object(s.b)((function(e){return{suggestion:{cursor:"pointer",padding:16,borderRadius:4},suggestionHighlighted:{background:e.colorGrey}}}))(ve),ye=n(197),xe=function(e){var t=e.classes,n=void 0===t?{}:t,o=e.cityId,c=e.onCuisinesSelected,i=Object(a.useState)([]),l=Object(O.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)([]),d=Object(O.a)(m,2),p=d[0],b=d[1],h=Object(a.useState)(!1),v=Object(O.a)(h,2),y=v[0],x=v[1];Object(a.useEffect)((function(){function e(){return(e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getCuisinesByCityId(o.toString());case 2:t=e.sent,u(t),b(t.map((function(e){return e.id})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o]);return r.a.createElement(r.a.Fragment,null,y?r.a.createElement("div",{className:n.root},r.a.createElement(R,{caption:!0,style:{marginBottom:16,display:"block",textAlign:"start"}},"Click a cuisine below to adjust your voters options."),s.map((function(e){return r.a.createElement("div",{className:f()(n.pill,Object(g.a)({},n.pillActive,p.indexOf(e.id)>-1)),key:e.id,onClick:function(){return function(e){var t=p.slice(),n=t.indexOf(e);return n>-1?t.splice(n,1):t.push(e),b(t),c(t)}(e.id)}},r.a.createElement(R,{style:{color:"inherit"},caption:!0},e.name))}))):r.a.createElement(E,{secondary:!0,onClick:function(){return x(!0)},icon:r.a.createElement(ye.a,null)},"Open Cuisine Editor"))},Oe=Object(s.b)((function(e){return{pill:{padding:"8px 16px",margin:4,borderRadius:32,background:e.colorGrey,cursor:"pointer",display:"inline-block",verticalAlign:"middle"},pillActive:{backgroundColor:e.colorPrimary,color:"white"},root:{textAlign:"center",margin:"8px 0",maxHeight:152,overflowY:"scroll"}}}))(xe),je=function(e){var t=e.classes,n=void 0===t?{}:t,o=e.setUser,i=e.user,l=e.history,s=Object(a.useState)(!1),u=Object(O.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)(""),b=Object(O.a)(p,2),h=b[0],v=b[1],y=Object(a.useState)(0),x=Object(O.a)(y,2),j=x[0],w=x[1],k=Object(a.useState)(null),C=Object(O.a)(k,2),N=C[0],I=C[1],T=Object(a.useState)([]),P=Object(O.a)(T,2),F=P[0],W=P[1],U=Object(a.useState)(-1),z=Object(O.a)(U,2),A=z[0],M=z[1],_=Object(a.useState)(!1),D=Object(O.a)(_,2),H=D[0],G=D[1],V=Object(a.useState)(!1),K=Object(O.a)(V,2),te=K[0],ae=K[1],oe=Object(a.useState)(""),ce=Object(O.a)(oe,2),ie=ce[0],le=ce[1],se=Object(a.createRef)(),me=function(e){var t=e.i,a=void 0===t?0:t;return r.a.createElement("div",{className:f()(n.dot,Object(g.a)({},n.dotActive,j===a))})},pe=function(){var e;h.length>0&&(o({username:h}),null===se||void 0===se||null===(e=se.current)||void 0===e||e.focus())},fe=function(){var e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N&&i.username&&F){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,ue.createRoom(i.username,N,F);case 5:return t=e.sent,w(j+1),e.abrupt("return",o(t));case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e;if(!ie)return null;var t=ie.split("/"),n=t.length<2?ie.trim():null===(e=t.pop())||void 0===e?void 0:e.trim();return l.push("vote/".concat(n))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement("main",{className:n.main},r.a.createElement("img",{src:de.a,alt:"People sharing food",className:n.headingImg}),r.a.createElement("div",null,r.a.createElement(R,{h1:!0,primaryColor:!0},"Find the food",r.a.createElement("br",null),"for everyone."),r.a.createElement(R,{h4:!0},"Vote for the next place to eat from",r.a.createElement("br",null),"over thousands of local restaurants",r.a.createElement("br",null),"and cuisines."),r.a.createElement("div",{className:n.buttonsContainer},r.a.createElement(E,{onClick:function(){d(!0),ae(!1)},icon:r.a.createElement(q.a,null)},"Start a Vote"),r.a.createElement(E,{secondary:!0,icon:r.a.createElement(Q.a,null),onClick:function(){return ae(!0)}},"Join a Vote"),te&&r.a.createElement("div",{className:n.joinVotePanel},r.a.createElement(R,{bold:!0},"Enter an ID or URL below to start voting."),r.a.createElement(S,{autoFocus:!0,value:ie,onChange:function(e){return le(e.target.value)},placeholder:"Enter an ID or URL",onEnterPressed:be}),r.a.createElement(E,{onClick:be,icon:r.a.createElement(X.a,null)},"Start Voting")))),r.a.createElement(B,{isOpen:m,onRequestClose:function(){return d(!1)},title:"Start a vote"},r.a.createElement(ne.a,{onTransitionEnd:function(){return M(j-1)},disabled:!0,index:j,onChangeIndex:function(e){return w(e)}},r.a.createElement("div",{className:n.slide},r.a.createElement(R,{h4:!0},"Hey! ",r.a.createElement("span",{role:"img","aria-label":"waving hand"},"\ud83d\udc4b")),r.a.createElement(R,{className:n.subheading},"To start off, enter a username below"),r.a.createElement("div",null,r.a.createElement(S,{autoFocus:!0,width:"100%",onChange:function(e){return v(e.currentTarget.value)},value:h,ignoreTab:!0,placeholder:"Enter a username",onEnterPressed:pe,disabled:0===A}),r.a.createElement(E,{className:n.nextButton,disabled:h.length<1||0!==j,icon:r.a.createElement($.a,null),onClick:pe},"Select City"))),r.a.createElement("div",{className:n.slide},r.a.createElement(R,{h4:!0},"Thanks, ",i.username,"! ",r.a.createElement("span",{role:"img","aria-label":"thumbs up"},"\ud83d\udc4d")),r.a.createElement(R,{className:n.subheading},"Where are we eating today?"),r.a.createElement(Ee,{onCitySelected:I,inputRef:se}),r.a.createElement(E,{className:n.nextButton,icon:r.a.createElement($.a,null),onClick:function(){return w(j+1)},disabled:!N||1!==j},"Select Cuisines")),r.a.createElement("div",{className:n.slide},r.a.createElement(R,{h4:!0},"Picky eaters? ",r.a.createElement("span",{role:"img","aria-label":"face savoring food"},"\ud83d\ude0b")),r.a.createElement(R,null,"If you would like to remove any cuisines from the vote, you can do so now by opening the cuisine editor."),r.a.createElement(R,null,"Otherwise, you may start voting!"),N&&r.a.createElement(Oe,{cityId:N.id,onCuisinesSelected:function(e){return W(e)}}),r.a.createElement(E,{className:n.nextButton,icon:r.a.createElement(X.a,null),onClick:fe,disabled:!N||2!==j},"Start Voting")),r.a.createElement("div",{className:n.slide},r.a.createElement(R,{h4:!0},"Let's eat! ",r.a.createElement("span",{role:"img","aria-label":"rocket"},"\ud83d\ude80")),r.a.createElement(R,{className:n.subheading},"You can invite people to join your vote for a place to eat in ",r.a.createElement("b",null,null===N||void 0===N?void 0:N.name)," using the link below:"),r.a.createElement(c.b,{to:"vote/".concat(i.room.id),rel:"noopener noreferrer",className:n.link},"".concat(window.location.href,"vote/").concat(i.room.id)),r.a.createElement(re.a,{text:"".concat(window.location.href,"vote/").concat(i.room.id),onCopy:function(){return G(!0)}},r.a.createElement(E,{success:H,secondary:!0,icon:H?r.a.createElement(Z.a,null):r.a.createElement(ee.a,null)},H?"Success":"Copy Link")),r.a.createElement(c.b,{to:"vote/".concat(i.room.id),rel:"noopener noreferrer"},r.a.createElement(E,{style:{width:"100%"},icon:r.a.createElement(Q.a,null)},"Join Vote")))),r.a.createElement("div",{className:n.dotsWrapper},r.a.createElement(me,null),r.a.createElement(me,{i:1}),r.a.createElement(me,{i:2}),r.a.createElement(me,{i:3})))))},Se=Object(i.f)(je),we=Object(s.b)((function(e){return{main:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:e.colorWhite},headingImg:{maxWidth:420,marginRight:32,userSelect:"none"},buttonsContainer:{display:"flex",flexDirection:"column",marginTop:32,position:"relative"},dotsWrapper:{justifyContent:"center",alignItems:"center",display:"flex"},dot:{width:8,margin:8,height:8,borderRadius:50,backgroundColor:e.colorGrey},dotActive:{backgroundColor:e.colorPrimary},slide:{height:360,display:"flex",flexDirection:"column"},nextButton:{width:"100%"},link:{textDecoration:"none",fontSize:16,fontFamily:"monospace",color:e.colorPrimary,padding:16,margin:"16px 0",display:"block",background:e.colorGrey,borderRadius:4,overflowX:"scroll"},linkWrapper:{display:"flex",justifyContent:"space-between",marginTop:32},joinVotePanel:{padding:16,position:"absolute",bottom:-208,right:0,left:0,borderRadius:4,border:"1px solid ".concat(e.colorGrey),display:"flex",flexDirection:"column",background:"white"},subheading:{marginBottom:16}}}))(Se),ke=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:t})}}}))(we),Ce=n(86),Ne=n(204),Re=n(205),Ie=n(206),Te=n(207),Pe=n(208),Fe=n(209),Be=n(210),We=n(87),Ue=n.n(We),ze=(n(188),n(189),Ue()("#FE3E57","hex")),Ae={fontFamily:'"Muli",-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol',colorPrimary:ze.hsl().string(),colorPrimaryLight:ze.lighten(.4).hsl().string(),colorSecondary:"#1F2255",colorRed:"#f44336",colorWhite:ze.lighten(.99).hsl().string(),colorGreen:"#4caf50",colorBlue:"#2196f3",colorAmber:"#ff9800",colorGrey:"#e6e6e6",textPrimary:"#484848",textSecondary:"#906e62",media:{mobile:"@media all and (max-width: 414px)"},colorRandom:function(){var e=Math.floor(3*Math.random());return 0===e?"#4caf50":1===e?"#2196f3":"#ff9800"}},Me=function(e){var t=e.rating,n=void 0===t?0:t,a=e.classes,o=void 0===a?{}:a,c={size:20},i=[1,2,3,4,5].map((function(e){return e<n?r.a.createElement(X.a,Object.assign({},c,{key:e,fill:Ae.colorAmber,color:Ae.colorAmber})):r.a.createElement(X.a,Object.assign({},c,{key:e,color:Ae.colorGrey}))}));return r.a.createElement("div",{className:o.root},i)},_e=Object(s.b)({root:{display:"inline-block",verticalAlign:"middle",marginRight:8}})(Me),De=function(e){var t=e.restaurant,n=void 0===t?{}:t,a=e.classes,o=void 0===a?{}:a,c=e.onSelect,i=void 0===c?function(){}:c,l=e.selected,s=void 0!==l&&l,u=e.disabled,m=void 0!==u&&u,d=e.compact,p=void 0!==d&&d;return r.a.createElement(x,{className:o.restaurantCard},!p&&r.a.createElement("div",{className:o.imageWrapper},r.a.createElement("div",{className:o.restaurantImg,style:{backgroundImage:"url(".concat(n.thumbnail,")")}},!n.thumbnail&&r.a.createElement(Ne.a,{size:50})),r.a.createElement("div",{className:o.buttonsWrapper},r.a.createElement("a",{href:n.menuUrl,style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer"},r.a.createElement(E,{secondary:!0,style:{width:"100%"},icon:r.a.createElement(Re.a,null)},"View Menu")),r.a.createElement(E,{secondary:!s,disabled:m,onClick:i,icon:r.a.createElement(Ie.a,null)},s?"Unfavourite":"Favourite"))),r.a.createElement("div",{className:o.infoWrapper},r.a.createElement("div",{className:o.compact},r.a.createElement(R,{h4:!0,style:{marginBottom:8}},n.name),r.a.createElement(R,{caption:!0},n.cuisines),r.a.createElement("div",{style:{margin:"8px 0"}},r.a.createElement(_e,{rating:null===n||void 0===n?void 0:n.averageRating}),!p&&r.a.createElement(R,{className:o.inlineText},"(",n.totalReviews," reviews)"))),r.a.createElement("div",null,r.a.createElement("div",{className:o.bullet},r.a.createElement(Te.a,{size:16,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},n.address)),r.a.createElement("div",{className:o.bullet},r.a.createElement(Pe.a,{size:16,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},n.phoneNumbers)),r.a.createElement("div",{className:o.bullet},r.a.createElement(Fe.a,{size:16,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},"Around \xa3",n.averageCostForTwo," for two")),!p&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.bullet},n.deliveryOpen?r.a.createElement(Z.a,{size:16,color:Ae.colorGreen,className:o.bulletIcon}):r.a.createElement(P.a,{size:16,color:Ae.colorRed,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},"Delivery ",n.deliveryOpen?"available":"unavailable")),r.a.createElement("div",{className:o.bullet},n.takeawayOpen?r.a.createElement(Z.a,{size:16,color:Ae.colorGreen,className:o.bulletIcon}):r.a.createElement(P.a,{size:16,color:Ae.colorRed,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},"Collection ",n.takeawayOpen?"available":"unavailable")),r.a.createElement("div",{className:o.bullet},r.a.createElement(Be.a,{size:16,className:o.bulletIcon}),r.a.createElement(R,{className:o.inlineText},n.openHours))))))},He=function(e){return{restaurantCard:function(e){var t=e.compact,n=void 0!==t&&t;return{display:"flex",justifyContent:"space-between",margin:n?24:32,padding:n?16:24}},imageWrapper:{width:"calc(40% - 16px)",marginRight:24},restaurantImg:{height:"calc(100% - 136px)",backgroundSize:"cover",borderRadius:8,marginBottom:8,backgroundColor:e.colorGrey,display:"flex",justifyContent:"center",color:e.textPrimary,alignItems:"center"},buttonsWrapper:{display:"flex",justifyContent:"space-between",flexDirection:"column"},infoWrapper:function(e){var t=e.compact,n=void 0!==t&&t;return{width:n?"100%":"60%",display:n?"flex":"block",alignItems:"center"}},inlineText:{display:"inline",verticalAlign:"middle",marginBottom:0},bulletIcon:{marginRight:8,marginBottom:4,display:"inline-block",verticalAlign:"middle"},bullet:{margin:"8px 0"},compact:function(e){var t=e.compact;return{minWidth:void 0!==t&&t?"40%":"auto"}}}},Ge=Object(s.b)(He)(De),Ve=n(88),Le=function(e){var t=e.classes,n=void 0===t?{}:t,a=function(){var e=Math.ceil(150),t=Math.floor(300);return Math.floor(Math.random()*(t-e))+e};return r.a.createElement(x,{className:n.restaurantCard},r.a.createElement(Ve.a,{height:260,width:600},r.a.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"225",height:"136"}),r.a.createElement("rect",{x:"0",y:"150",rx:"4",ry:"4",width:"225",height:"46"}),r.a.createElement("rect",{x:"0",y:"210",rx:"4",ry:"4",width:"225",height:"46"}),r.a.createElement("rect",{x:"248",y:"0",rx:"1",ry:"1",width:"160",height:"27"}),r.a.createElement("rect",{x:"248",y:"35",rx:"1",ry:"1",width:"64",height:"14"}),r.a.createElement("rect",{x:"320",y:"35",rx:"1",ry:"1",width:"72",height:"14"}),r.a.createElement("rect",{x:"248",y:"56",rx:"1",ry:"1",width:"108",height:"24"}),r.a.createElement("rect",{x:"248",y:"88",rx:"1",ry:"1",width:a(),height:"20"}),r.a.createElement("rect",{x:"248",y:"118",rx:"1",ry:"1",width:a(),height:"20"}),r.a.createElement("rect",{x:"248",y:"148",rx:"1",ry:"1",width:a(),height:"20"}),r.a.createElement("rect",{x:"248",y:"178",rx:"1",ry:"1",width:a(),height:"20"}),r.a.createElement("rect",{x:"248",y:"208",rx:"1",ry:"1",width:a(),height:"20"}),r.a.createElement("rect",{x:"248",y:"236",rx:"1",ry:"1",width:a(),height:"20"})))},Ke=Object(s.b)((function(e){return{restaurantCard:He(e).restaurantCard}}))(Le),Ye=function(e){var t=e.user,n=e.classes,o=void 0===n?{}:n,c=e.setUser,i=void 0===c?function(){}:c,l=Object(a.useState)(""),s=Object(O.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(!0),p=Object(O.a)(d,2),f=p[0],b=p[1],g=Object(a.useState)(null),v=Object(O.a)(g,2),E=v[0],y=v[1];Object(a.useEffect)((function(){function e(){return(e=Object(J.a)(Y.a.mark((function e(){var n,a,r,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,a=n.city.id,r=n.cuisines,e.next=3,he.getRestaurants(a.toString(),r);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return y(o),e.abrupt("return",b(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&t.room&&function(){e.apply(this,arguments)}()}),[]);var x=function(){var e=Object(J.a)(Y.a.mark((function e(){var n,a,r,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(null),b(!0),n=t.room,a=n.city.id,r=n.cuisines,e.next=5,he.getRestaurants(a.toString(),r,u);case 5:if(o=e.sent,b(!1),o){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",y(o));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(J.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.updateSelection(t);case 3:return n=e.sent,e.abrupt("return",i(n));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),Object(W.c)(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(J.a)(Y.a.mark((function e(){var n,a,r,o,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,a=n.city.id,r=n.cuisines,e.next=3,he.getRestaurants(a.toString(),r,void 0,null===E||void 0===E?void 0:E.metadata.nextPageStart);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(!(c=null===E||void 0===E?void 0:E.restaurants)){e.next=10;break}return i=c.concat(o.restaurants),e.abrupt("return",y(Object(h.a)({},o,{restaurants:i})));case 10:return e.abrupt("return",y(o));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement(S,{width:"100%",placeholder:"Start typing a restaurant name, cuisine, etc",icon:r.a.createElement(be.a,{style:{cursor:"pointer"},onClick:x}),onEnterPressed:x,value:u,onChange:function(e){m(e.currentTarget.value),u.length>3&&x()}}),r.a.createElement("div",{className:o.container,id:"container"},f?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke,null),r.a.createElement(Ke,null),r.a.createElement(Ke,null)):r.a.createElement(Ce.a,{dataLength:E?E.restaurants.length:0,next:w,hasMore:!!E&&E.metadata.hasMoreResults,loader:r.a.createElement(Ke,null),scrollableTarget:"container"},E&&E.restaurants.map((function(e){return r.a.createElement(Ge,{key:e.id,restaurant:e,onSelect:function(){return j(e)},selected:t.vote.selection.findIndex((function(t){return t.id===e.id}))>-1,disabled:t.vote.hasConfirmedSelection})})))))},Je=Object(s.b)((function(e){return{container:{maxWidth:752,width:"100%",minWidth:577,maxHeight:"calc(100vh - 148px)",overflowY:"scroll"}}}))(Ye),qe=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:t})}}}))(Je),Qe=n(51),Xe=n(89),$e=n.n(Xe),Ze={id:"",room:{id:"",city:{id:0,name:"",area:""},cuisines:[]},vote:{hasConfirmedSelection:!1,selection:[]}},et=function(e){var t=e.classes,n=void 0===t?{}:t,o=e.user,c=void 0===o?Ze:o,i=Object(a.useState)({count:1,users:[c]}),l=Object(O.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)(null),d=Object(O.a)(m,2),p=d[0],f=d[1],b=Object(a.useState)(!1),g=Object(O.a)(b,2),h=g[0],v=g[1];Qe.a.rebuild();var E=function(){return Object(W.c)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{bold:!0},"The votes are in! ",r.a.createElement("span",{role:"img","aria-label":"face savouring food"},"\ud83d\ude0b")),r.a.createElement(R,null,"Click here to view the results."))}),{autoClose:!1,progress:0,draggable:!1,closeButton:!1,onClick:function(){return v(!0)}})};if(Object(a.useEffect)((function(){ue.whenRoomUpdates(u),ue.whenVoteIsFinished((function(e){f(e),E()}))}),[]),!s)return null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:n.confettiWrapper},r.a.createElement($e.a,{active:h,config:{angle:180,spread:360,startVelocity:40,elementCount:70,dragFriction:.12,duration:3e3,stagger:3,width:"8px",height:"8px",perspective:"600px"}})),r.a.createElement(B,{isOpen:h,title:"Vote Results",onRequestClose:function(){v(!1),E()}},r.a.createElement(R,{h4:!0},"Let's eat! ",r.a.createElement("span",{role:"img","aria-label":"dinner"},"\ud83c\udf7d\ufe0f")),r.a.createElement(R,{bold:!0},"Out of so many tasty choices, our top ",1===(null===p||void 0===p?void 0:p.mostCommonRestaurants.length)?"pick is":"picks are","..."),r.a.createElement("div",{className:n.overflow},null===p||void 0===p?void 0:p.mostCommonRestaurants.map((function(e){return r.a.createElement(Ge,{compact:!0,key:e.id,restaurant:e})}))),r.a.createElement(R,{bold:!0},"Regardless of restaurant, most of us are in the mood for"),null===p||void 0===p?void 0:p.mostCommonCuisines.map((function(e){return r.a.createElement("div",{className:n.pill,key:e},r.a.createElement(R,{caption:!0},e))}))),r.a.createElement(x,null,r.a.createElement(Qe.a,{effect:"solid",className:n.tooltip,place:"top"}),r.a.createElement(R,{grey:!0,caption:!0},s.count," ",1===s.count?"user":"users"," in this vote"),r.a.createElement("ul",{className:n.list},(s.users||[]).map((function(e){return e&&r.a.createElement("li",{key:e.id,className:n.listItem},e.vote.hasConfirmedSelection?r.a.createElement(Z.a,{size:20,color:Ae.colorGreen,"data-tip":"Finished Voting"}):r.a.createElement(P.a,{size:20,color:Ae.colorRed,"data-tip":"Still Browsing"}),r.a.createElement(R,{className:n.listItemText,bold:e.id===c.id},e.username))})))))},tt=Object(s.b)((function(e){return{list:{padding:0,margin:"16px 0"},listItem:{display:"flex",alignItems:"center",margin:"8px 0"},listItemText:{marginBottom:0,marginLeft:8},tooltip:{fontFamily:e.fontFamily},confettiWrapper:{userSelect:"none",pointerEvents:"none",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:2},overflow:{maxHeight:224,overflowY:"scroll",marginBottom:24},pill:{padding:"8px 16px",margin:"16px 4px",borderRadius:32,background:e.colorPrimary,display:"inline-block",verticalAlign:"middle","& > span":{color:"white"}}}}))(et),nt=Object(u.b)((function(e){return{user:e.user}}))(tt),at=n(211),rt=n(212),ot=function(e){var t,n,a,o,c=e.user,i=void 0===c?{}:c,l=e.classes,s=void 0===l?{}:l,u=e.setUser,m=void 0===u?function(){}:u,d=function(){var e=Object(J.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.updateSelection(t);case 2:return n=e.sent,e.abrupt("return",m(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.confirmSelection();case 2:return t=e.sent,e.abrupt("return",m(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(x,null,r.a.createElement(R,{grey:!0,caption:!0},"Your Selection"),r.a.createElement("div",{className:s.selectionWrapper},i.vote&&i.vote.selection.length>0?i.vote.selection.map((function(e){var t;return r.a.createElement("div",{className:s.restaurantListItem,key:e.id},r.a.createElement(R,{bold:!0},e.name),!(null===(t=i.vote)||void 0===t?void 0:t.hasConfirmedSelection)&&r.a.createElement(at.a,{color:Ae.colorRed,size:16,onClick:function(){return d(e)}}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{bold:!0},"There's nothing here yet."),r.a.createElement(R,null,"Select ",r.a.createElement("b",null,"between one and three")," restaurants to submit your vote."))),r.a.createElement(E,{disabled:!(null===(t=i.vote)||void 0===t?void 0:t.selection.length),success:null===(n=i.vote)||void 0===n?void 0:n.hasConfirmedSelection,icon:(null===(a=i.vote)||void 0===a?void 0:a.hasConfirmedSelection)?r.a.createElement(Z.a,null):r.a.createElement(rt.a,null),style:{width:"100%"},onClick:p},(null===(o=i.vote)||void 0===o?void 0:o.hasConfirmedSelection)?"Vote Submitted":"I'm Ready"))},ct=Object(s.b)({selectionWrapper:{margin:"16px 0"},restaurantListItem:{display:"flex",justifyContent:"space-between","& > svg":{cursor:"pointer"}}})(ot),it=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:t})}}}))(ct),lt=n(213),st=n(214),ut=function(e){var t=e.classes,n=void 0===t?{}:t,o=e.user,c=void 0===o?{}:o,i=Object(a.useState)(!1),l=Object(O.a)(i,2),s=l[0],u=l[1],m=Object(a.useState)([]),d=Object(O.a)(m,2),p=d[0],b=d[1],h=Object(a.useState)(""),v=Object(O.a)(h,2),E=v[0],y=v[1],j=Object(a.useState)(0),w=Object(O.a)(j,2),k=w[0],C=w[1],N=function(){u(!s),C(0),I()},I=function(){var e;F&&F.current&&(F.current.scrollTop=F.current.scrollHeight,null===B||void 0===B||null===(e=B.current)||void 0===e||e.focus())},T=function(){return E?(ue.sendMessage(E),y("")):null},F=Object(a.useRef)(null),B=Object(a.useRef)(null);Object(a.useEffect)((function(){function e(){return(e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.getMessageHistory();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",b(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),ue.whenMessageHistoryUpdates((function(e){!function(e){b(e),C(k+1)}(e),I()}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:n.button,onClick:N},k>0&&!s&&r.a.createElement("div",{className:n.unreadMessageCountBadge},k),r.a.createElement(lt.a,{size:20})),r.a.createElement(D,{in:s,timeout:250},r.a.createElement(x,{className:n.chat},r.a.createElement(P.a,{onClick:N,size:20,className:n.closeButton}),r.a.createElement(R,{h4:!0},"Messages"),r.a.createElement("div",{className:n.messageWrapper,ref:F},p.map((function(e,t){var o=function(e){var t=new Date(e),n=function(e){return e<9?"0".concat(e):e},a=n(t.getHours()),r=n(t.getMinutes());return"".concat(a,":").concat(r)}(e.timestamp);return r.a.createElement(a.Fragment,{key:"".concat(e.timestamp,"-").concat(e.from)},r.a.createElement("div",{className:f()(n.messageBubble,Object(g.a)({},n.myMessage,e.from===c.id))},(!p[t-1]||p[t-1]&&p[t-1].from!==e.from)&&r.a.createElement(R,{bold:!0,caption:!0},e.displayName,", ",o),r.a.createElement(R,null,e.content)))}))),r.a.createElement(S,{ref:B,placeholder:"Send a message",icon:r.a.createElement(st.a,{onClick:T,style:{cursor:"pointer"}}),onChange:function(e){return y(e.target.value)},value:E,onEnterPressed:T,width:"100%"}))))},mt=Object(s.b)((function(e){return{button:{background:e.colorPrimary,padding:24,borderRadius:100,cursor:"pointer",border:0,outline:"none",color:"white",position:"fixed",bottom:32,right:32,display:"flex",justifyContent:"center",alignItems:"center"},chat:{position:"fixed",right:32,bottom:124,height:400,width:320,margin:0,padding:24},closeButton:{color:e.colorGrey,cursor:"pointer",position:"absolute",top:0,right:0,padding:16},messageWrapper:{height:286,marginBottom:8,padding:4,overflowY:"scroll"},messageBubble:{display:"flex",flexDirection:"column",alignItems:"flex-start","& > p":{color:e.textPrimary,marginBottom:"4px 0",background:e.colorPrimaryLight,borderRadius:8,padding:"8px 16px"},"& > span":{marginTop:24}},myMessage:{alignItems:"flex-end","& > p":{background:e.colorPrimary,color:"white"}},unreadMessageCountBadge:{height:16,width:16,padding:8,borderRadius:50,background:e.colorSecondary,color:"white",position:"absolute",top:-4,right:-4,fontFamily:e.fontFamily,fontWeight:"bold",fontSize:12}}}))(ut),dt=Object(u.b)((function(e){return{user:e.user}}))(mt),pt=function(e){var t,n,o=e.setUser,c=e.updateUser,i=e.match.params,l=e.history,s=e.user,u=e.classes,m=void 0===u?{}:u,d=Object(a.useState)(""),p=Object(O.a)(d,2),f=p[0],b=p[1],g=Object(a.useState)(""),h=Object(O.a)(g,2),v=h[0],y=h[1];Object(a.useEffect)((function(){function e(){return(e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.joinRoom(i.id);case 3:return t=e.sent,e.abrupt("return",o(t));case 7:e.prev=7,e.t0=e.catch(0),l.push("/404"),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}s&&s.username||function(){e.apply(this,arguments)}()}),[]);var x=function(){var e=Object(J.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.setUsername(f);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return y(""),e.abrupt("return",c({username:t.username}));case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",y(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{closeButton:!1,isOpen:!s||!s.username||!s.username.length,className:m.modal,title:"Join a vote"},r.a.createElement(R,{h4:!0},"Hey! ",r.a.createElement("span",{role:"img","aria-label":"waving hand"},"\ud83d\udc4b")),r.a.createElement(R,null,"You've joined a vote for a place to eat in ",r.a.createElement("b",null,null===s||void 0===s||null===(t=s.room)||void 0===t||null===(n=t.city)||void 0===n?void 0:n.name),"."),r.a.createElement(R,null,"Start by entering a username and selecting ",r.a.createElement("b",null,"up to three")," of your favourite restaurants."),r.a.createElement(R,null,"Hit the \"I'm ready\" button once you've finished your selection!"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:16}},r.a.createElement(S,{placeholder:"Enter a username",autoFocus:!0,error:v,value:f,onEnterPressed:x,onChange:function(e){return y(""),b(e.currentTarget.value)}}),r.a.createElement(E,{disabled:f.length<=0||Boolean(v),onClick:x,icon:r.a.createElement(X.a,null)},"Start Voting"))),r.a.createElement(L,null),r.a.createElement("main",{className:m.root},r.a.createElement("div",{className:m.colSm},r.a.createElement(nt,null),r.a.createElement(it,null)),r.a.createElement("div",{className:m.colMd},s&&s.username&&s.username.length&&r.a.createElement(qe,null))),s&&s.username&&s.username.length&&r.a.createElement(dt,null))},ft=function(e){return{margin:"8px 8px 0",padding:"16px 16px 0",width:"calc(".concat(e,"% - 48px)"),minWidth:5*e,display:"flex",flexDirection:"column"}},bt=Object(s.b)((function(e){return{logo:{position:"absolute",top:24,left:24,userSelect:"none"},root:{display:"flex",padding:"64px 32px 0",background:e.colorWhite},colSm:ft(25),colMd:ft(50),colLg:ft(75),colFull:ft(100),modal:{height:"auto"}}}))(pt),gt=Object(i.f)(bt),ht=[{path:"/appetite/",Component:ke,title:"Appetite | Find the perfect place to eat."},{path:"/appetite/vote/:id",Component:Object(u.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:t})},updateUser:function(t){return e({type:"UPDATE_USER",payload:t})}}}))(gt),title:"Appetite | Vote for your favourite restaurants."},{path:"/appetite/404",Component:function(){return r.a.createElement("main",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"}},r.a.createElement(R,{h2:!0,primaryColor:!0},"We couldn't find that vote ",r.a.createElement("span",{role:"img","aria-label":"Sad Face"},"\ud83d\ude14")),r.a.createElement(R,{h4:!0},"Try re-checking your link or ",r.a.createElement(c.b,{to:"/"},"creating a new vote"),"."))},title:"Appetite | We couldn't find that vote..."}],vt=n(24),Et=n(90),yt={username:"",id:"",room:{id:"",city:{id:"",name:""},cuisines:[]},vote:{hasConfirmedSelection:!1,selection:[]}},xt=Object(vt.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(h.a)({},e,{},t.payload);case"DELETE_USER":return yt;case"UPDATE_USER":return Object(h.a)({},e,{},t.payload);case"SET_USER_ROOM":return Object(h.a)({},e,{room:t.payload});default:return e}}}),Ot=Object(vt.createStore)(xt,Object(Et.devToolsEnhancer)({}));Object(o.render)(r.a.createElement(u.a,{store:Ot},r.a.createElement(s.a,{theme:Ae},r.a.createElement(c.a,null,r.a.createElement(i.c,null,ht.map((function(e){var t=e.path,n=e.Component,a=e.title;return r.a.createElement(i.a,{key:t,path:t,exact:!0,render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement("title",null,a)),r.a.createElement(n,null))}})})))),r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,n){e.exports=n.p+"static/media/appetite-logotype-transparent.dbdf287f.png"},84:function(e,t,n){e.exports=n.p+"static/media/header.0d18ebdc.svg"},94:function(e,t,n){e.exports=n(191)}},[[94,1,2]]]);
//# sourceMappingURL=main.0eb2cc3d.chunk.js.map